# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
book-store/                              # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ src/                                # æºä»£ç ç›®å½•
â”‚   â”‚
â”‚   â”œâ”€â”€ main/                           # âœ… Electron ä¸»è¿›ç¨‹ä»£ç 
â”‚   â”‚   â”œâ”€â”€ index.ts                    # â­ ä¸»è¿›ç¨‹å…¥å£ï¼Œåˆ›å»ºçª—å£ã€åˆå§‹åŒ–æ•°æ®åº“
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ipc/                        # âœ… IPC é€šä¿¡å¤„ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ bookHandler.ts          # â­ ä¹¦ç±æ“ä½œçš„ IPC å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ documentHandler.ts      # â­ æ–‡æ¡£æ“ä½œçš„ IPC å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ searchHandler.ts        # â­ æœç´¢æ“ä½œçš„ IPC å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ statsHandler.ts         # â­ ç»Ÿè®¡æ“ä½œçš„ IPC å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ tagHandler.ts           # â­ æ ‡ç­¾æ“ä½œçš„ IPC å¤„ç†ï¼ˆé˜¶æ®µåä¸€æ–°å¢ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ services/                   # âœ… ä¸»è¿›ç¨‹ä¸šåŠ¡æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ database.ts             # â­ æ•°æ®åº“æœåŠ¡ï¼ˆSQLite CRUDï¼‰
â”‚   â”‚       â”œâ”€â”€ spider.ts               # â­ çˆ¬è™«æœåŠ¡ï¼ˆyoushu.meï¼‰
â”‚   â”‚       â”œâ”€â”€ fileManager.ts          # â­ æ–‡ä»¶ç®¡ç†æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ wordCounter.ts          # â­ å­—æ•°ç»Ÿè®¡æœåŠ¡
â”‚   â”‚       â””â”€â”€ cover.ts                # â­ å°é¢ä¸‹è½½æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ preload/                        # âœ… Electron é¢„åŠ è½½è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ index.ts                    # â­ æš´éœ²å®‰å…¨çš„ API ç»™æ¸²æŸ“è¿›ç¨‹
â”‚   â”‚   â””â”€â”€ index.d.ts                  # â­ TypeScript ç±»å‹å£°æ˜
â”‚   â”‚
â”‚   â””â”€â”€ renderer/                       # âœ… Vue æ¸²æŸ“è¿›ç¨‹ä»£ç 
â”‚       â”œâ”€â”€ index.html                  # HTML å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ auto-imports.d.ts           # è‡ªåŠ¨å¯¼å…¥ç±»å‹å£°æ˜
â”‚       â”œâ”€â”€ components.d.ts             # ç»„ä»¶ç±»å‹å£°æ˜
â”‚       â”‚
â”‚       â””â”€â”€ src/                        # Vue åº”ç”¨æºç 
â”‚           â”œâ”€â”€ main.ts                 # â­ Vue åº”ç”¨å…¥å£
â”‚           â”œâ”€â”€ App.vue                 # â­ æ ¹ç»„ä»¶ï¼ŒåŒ…å«å¸ƒå±€
â”‚           â”‚
â”‚           â”œâ”€â”€ router/                 # âœ… Vue Router è·¯ç”±é…ç½®
â”‚           â”‚   â””â”€â”€ index.ts            # â­ è·¯ç”±å®šä¹‰ï¼ˆå«æ ‡ç­¾ç®¡ç†è·¯ç”±ï¼‰
â”‚           â”‚
â”‚           â”œâ”€â”€ stores/                 # âœ… Pinia çŠ¶æ€ç®¡ç†
â”‚           â”‚   â”œâ”€â”€ index.ts            # Pinia å®ä¾‹å¯¼å‡º
â”‚           â”‚   â”œâ”€â”€ book.ts             # â­ ä¹¦ç±çŠ¶æ€ï¼ˆbooks, currentBook, ç­›é€‰æ’åºï¼‰
â”‚           â”‚   â”œâ”€â”€ ui.ts               # â­ UI çŠ¶æ€ï¼ˆä¸»é¢˜ã€å¸ƒå±€ï¼‰
â”‚           â”‚   â”œâ”€â”€ stats.ts            # â­ ç»Ÿè®¡æ•°æ®çŠ¶æ€
â”‚           â”‚   â”œâ”€â”€ displayMode.ts      # â­ æ˜¾ç¤ºæ¨¡å¼çŠ¶æ€ï¼ˆç½‘æ ¼/åˆ—è¡¨ï¼‰
â”‚           â”‚   â””â”€â”€ tag.ts              # â­ æ ‡ç­¾çŠ¶æ€ï¼ˆtags, loadingï¼‰ï¼ˆé˜¶æ®µåä¸€æ–°å¢ï¼‰
â”‚           â”‚
â”‚           â”œâ”€â”€ views/                  # âœ… é¡µé¢ç»„ä»¶ï¼ˆè·¯ç”±çº§ï¼‰
â”‚           â”‚   â”œâ”€â”€ Home.vue            # â­ é¦–é¡µ - ä¹¦ç±åˆ—è¡¨ï¼ˆå«ç­›é€‰å’Œæ‰¹é‡æ“ä½œï¼‰
â”‚           â”‚   â”œâ”€â”€ BookDetail.vue      # â­ ä¹¦ç±è¯¦æƒ…é¡µï¼ˆå«æ ‡ç­¾ç®¡ç†ï¼‰
â”‚           â”‚   â”œâ”€â”€ AddBook.vue         # â­ æ·»åŠ ä¹¦ç±é¡µï¼ˆå«æ ‡ç­¾é€‰æ‹©ï¼‰
â”‚           â”‚   â”œâ”€â”€ Statistics.vue      # â­ ç»Ÿè®¡åˆ†æé¡µ
â”‚           â”‚   â”œâ”€â”€ Settings.vue        # â­ è®¾ç½®é¡µ
â”‚           â”‚   â””â”€â”€ TagManagement.vue   # â­ æ ‡ç­¾ç®¡ç†é¡µé¢ï¼ˆé˜¶æ®µåä¸€æ–°å¢ï¼‰
â”‚           â”‚
â”‚           â”œâ”€â”€ components/             # âœ… é€šç”¨ç»„ä»¶
â”‚           â”‚   â”œâ”€â”€ BookCard.vue        # â­ ä¹¦ç±å¡ç‰‡ï¼ˆç½‘æ ¼è§†å›¾ï¼Œå«æ ‡ç­¾å±•ç¤ºï¼‰
â”‚           â”‚   â”œâ”€â”€ BookForm.vue        # â­ ä¹¦ç±è¡¨å•ï¼ˆæ·»åŠ /ç¼–è¾‘ï¼‰
â”‚           â”‚   â”œâ”€â”€ SearchBar.vue       # â­ æœç´¢æ 
â”‚           â”‚   â”œâ”€â”€ NetworkSearch.vue   # â­ ç½‘ç»œæ£€ç´¢ç»„ä»¶
â”‚           â”‚   â”œâ”€â”€ DisplayModeToggle.vue # â­ è§†å›¾åˆ‡æ¢ç»„ä»¶
â”‚           â”‚   â”œâ”€â”€ StatusFilter.vue    # â­ çŠ¶æ€ç­›é€‰ç»„ä»¶ï¼ˆå·²åºŸå¼ƒï¼‰
â”‚           â”‚   â”œâ”€â”€ StatusStats.vue     # â­ çŠ¶æ€ç»Ÿè®¡å±•ç¤º
â”‚           â”‚   â”œâ”€â”€ FilterBar.vue       # â­ ç­›é€‰å·¥å…·æ ï¼ˆç±»å‹/å¹³å°/æ ‡ç­¾/æ’åºï¼‰ï¼ˆé˜¶æ®µåä¸€æ–°å¢ï¼‰
â”‚           â”‚   â”œâ”€â”€ TagList.vue         # â­ æ ‡ç­¾åˆ—è¡¨å±•ç¤ºç»„ä»¶ï¼ˆé˜¶æ®µåä¸€æ–°å¢ï¼‰
â”‚           â”‚   â”œâ”€â”€ TagSelector.vue     # â­ æ ‡ç­¾é€‰æ‹©å™¨ç»„ä»¶ï¼ˆé˜¶æ®µåä¸€æ–°å¢ï¼‰
â”‚           â”‚   â”œâ”€â”€ Versions.vue        # ç‰ˆæœ¬ä¿¡æ¯ç»„ä»¶
â”‚           â”‚   â”‚
â”‚           â”‚   â””â”€â”€ stats/              # ç»Ÿè®¡ç›¸å…³ç»„ä»¶
â”‚           â”‚       â””â”€â”€ BaseChart.vue   # â­ å›¾è¡¨åŸºç±»ç»„ä»¶ï¼ˆECharts å°è£…ï¼‰
â”‚           â”‚
â”‚           â”œâ”€â”€ api/                    # âœ… API æ¥å£å±‚ï¼ˆè°ƒç”¨ Electron APIï¼‰
â”‚           â”‚   â”œâ”€â”€ book.ts             # â­ ä¹¦ç± APIï¼ˆå«æ‰¹é‡åˆ é™¤ï¼‰
â”‚           â”‚   â”œâ”€â”€ document.ts         # â­ æ–‡æ¡£ API
â”‚           â”‚   â”œâ”€â”€ search.ts           # â­ æœç´¢ API
â”‚           â”‚   â”œâ”€â”€ stats.ts            # â­ ç»Ÿè®¡ API
â”‚           â”‚   â””â”€â”€ tag.ts              # â­ æ ‡ç­¾ APIï¼ˆé˜¶æ®µåä¸€æ–°å¢ï¼‰
â”‚           â”‚
â”‚           â”œâ”€â”€ types/                  # âœ… TypeScript ç±»å‹å®šä¹‰
â”‚           â”‚   â”œâ”€â”€ index.ts            # ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰ç±»å‹
â”‚           â”‚   â”œâ”€â”€ book.ts             # â­ Book ç›¸å…³ç±»å‹ï¼ˆå«Tagç±»å‹ï¼‰
â”‚           â”‚   â””â”€â”€ api.ts              # â­ API å“åº”ç±»å‹
â”‚           â”‚
â”‚           â”œâ”€â”€ utils/                  # âœ… å·¥å…·å‡½æ•°
â”‚           â”‚   â”œâ”€â”€ index.ts            # ç»Ÿä¸€å¯¼å‡ºå·¥å…·å‡½æ•°
â”‚           â”‚   â””â”€â”€ format.ts           # â­ æ ¼å¼åŒ–å‡½æ•°ï¼ˆæ—¥æœŸã€æ•°å­—ã€å­—æ•°ï¼‰
â”‚           â”‚
â”‚           â”œâ”€â”€ constants/              # âœ… å¸¸é‡å®šä¹‰
â”‚           â”‚   â””â”€â”€ index.ts            # â­ å¯¼å‡ºæ‰€æœ‰å¸¸é‡ï¼ˆé˜…è¯»çŠ¶æ€ã€å­—æ•°æ¥æºã€æ’åºé€‰é¡¹ã€æ ‡ç­¾é¢œè‰²ç­‰ï¼‰
â”‚           â”‚
â”‚           â””â”€â”€ assets/                 # âœ… é™æ€èµ„æº
â”‚               â”œâ”€â”€ base.css            # åŸºç¡€æ ·å¼
â”‚               â”œâ”€â”€ main.css            # ä¸»æ ·å¼
â”‚               â”œâ”€â”€ electron.svg        # Electron å›¾æ ‡
â”‚               â””â”€â”€ wavy-lines.svg      # è£…é¥°å›¾æ¡ˆ
â”‚
â”œâ”€â”€ database/                           # âœ… æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ schema.sql                      # â­ æ•°æ®åº“ç»“æ„å®šä¹‰
â”‚   â”œâ”€â”€ ibook.db                        # SQLite æ•°æ®åº“æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”‚   â””â”€â”€ migrations/                     # æ•°æ®åº“è¿ç§»è„šæœ¬ç›®å½•ï¼ˆé¢„ç•™ï¼‰
â”‚
â”œâ”€â”€ docs/                               # âœ… é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ éœ€æ±‚åˆ†ææ–‡æ¡£.md                 # â­ è¯¦ç»†éœ€æ±‚åˆ†æ
â”‚   â”œâ”€â”€ æŠ€æœ¯é€‰å‹ä¸æ¶æ„è®¾è®¡.md           # â­ æŠ€æœ¯æ ˆå’Œæ¶æ„
â”‚   â”œâ”€â”€ å¿«é€Ÿå¯åŠ¨æŒ‡å—.md                 # â­ å¼€å‘ç¯å¢ƒæ­å»º
â”‚   â”œâ”€â”€ è¡¥å……åŠŸèƒ½ä¸è®¾è®¡è¯´æ˜.md           # â­ è¡¥å……åŠŸèƒ½å’Œè¾¹ç•Œåœºæ™¯
â”‚   â”œâ”€â”€ å¼€å‘ä»»åŠ¡æ¸…å•.md                 # â­ è¯¦ç»†çš„å¼€å‘ä»»åŠ¡
â”‚   â”œâ”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md                 # â­ æœ¬æ–‡ä»¶
â”‚   â””â”€â”€ å®Œæˆæƒ…å†µæ€»ç»“.md                 # â­ é¡¹ç›®å®Œæˆæƒ…å†µæ€»ç»“
â”‚
â”œâ”€â”€ build/                              # æ„å»ºèµ„æº
â”‚   â”œâ”€â”€ icon.icns                       # macOS å›¾æ ‡
â”‚   â”œâ”€â”€ icon.ico                        # Windows å›¾æ ‡
â”‚   â”œâ”€â”€ icon.png                        # é€šç”¨å›¾æ ‡
â”‚   â””â”€â”€ entitlements.mac.plist          # macOS æƒé™é…ç½®
â”‚
â”œâ”€â”€ resources/                          # èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ icon.png                        # åº”ç”¨å›¾æ ‡
â”‚
â”œâ”€â”€ out/                                # æ„å»ºè¾“å‡ºç›®å½•ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”‚   â”œâ”€â”€ main/                           # ä¸»è¿›ç¨‹æ„å»ºäº§ç‰©
â”‚   â””â”€â”€ preload/                        # é¢„åŠ è½½è„šæœ¬æ„å»ºäº§ç‰©
â”‚
â”œâ”€â”€ public/                             # å…¬å…±èµ„æºï¼ˆä¸ä¼šè¢«æ‰“åŒ…å¤„ç†ï¼‰
â”‚
â”œâ”€â”€ node_modules/                       # ä¾èµ–åŒ…ç›®å½•
â”‚
â”œâ”€â”€ .gitignore                          # â­ Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ electron.vite.config.ts             # â­ Electron + Vite é…ç½®
â”œâ”€â”€ electron-builder.yml                # â­ Electron Builder æ‰“åŒ…é…ç½®
â”œâ”€â”€ eslint.config.mjs                   # â­ ESLint é…ç½®
â”œâ”€â”€ package.json                        # â­ é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ package-lock.json                   # npm é”å®šæ–‡ä»¶
â”œâ”€â”€ pnpm-lock.yaml                      # pnpm é”å®šæ–‡ä»¶
â”œâ”€â”€ tsconfig.json                       # â­ TypeScript é…ç½®
â”œâ”€â”€ tsconfig.node.json                  # Node.js ç¯å¢ƒ TS é…ç½®
â”œâ”€â”€ tsconfig.web.json                   # Web ç¯å¢ƒ TS é…ç½®
â”œâ”€â”€ dev-app-update.yml                  # å¼€å‘ç¯å¢ƒæ›´æ–°é…ç½®
â”œâ”€â”€ README.md                           # â­ é¡¹ç›®è¯´æ˜
â””â”€â”€ LICENSE                             # å¼€æºåè®®ï¼ˆå¦‚æœæœ‰ï¼‰
```

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### ä¸»è¿›ç¨‹ï¼ˆElectronï¼‰

#### `src/main/index.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: Electron åº”ç”¨çš„å…¥å£
- **èŒè´£**:
  - åˆ›å»ºä¸»çª—å£ï¼ˆå·²ä¼˜åŒ–é…ç½®ï¼‰
  - åˆå§‹åŒ–æ•°æ®åº“ï¼ˆapp.whenReady æ—¶ï¼‰
  - æ³¨å†Œæ‰€æœ‰ IPC å¤„ç†å™¨
  - ç®¡ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
  - å…³é—­æ—¶æ–­å¼€æ•°æ®åº“è¿æ¥

#### `src/preload/index.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æ¸²æŸ“è¿›ç¨‹ä¸ä¸»è¿›ç¨‹çš„æ¡¥æ¢
- **èŒè´£**:
  - é€šè¿‡ `contextBridge` æš´éœ²å®‰å…¨çš„ API
  - æš´éœ² bookã€documentã€searchã€stats ç›¸å…³ API
  - æä¾› TypeScript ç±»å‹å®šä¹‰ï¼ˆindex.d.tsï¼‰
  - éš”ç¦»æ¸²æŸ“è¿›ç¨‹å’Œ Node.js ç¯å¢ƒ

#### `src/main/services/database.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æ•°æ®åº“æ“ä½œå°è£…
- **èŒè´£**:
  - SQLite è¿æ¥ç®¡ç†ï¼ˆbetter-sqlite3ï¼‰
  - æ•°æ®åº“åˆå§‹åŒ–ï¼ˆè¯»å–å¹¶æ‰§è¡Œ schema.sqlï¼‰
  - ä¹¦ç± CRUD æ“ä½œ
  - æ–‡æ¡£ CRUD æ“ä½œ
  - ç¬”è®° CRUD æ“ä½œï¼ˆå·²å®ç°ï¼Œæš‚æœªä½¿ç”¨ï¼‰
  - æ ‡ç­¾ CRUD æ“ä½œï¼ˆå·²å®ç°ï¼Œæš‚æœªä½¿ç”¨ï¼‰
  - é˜…è¯»è¿›åº¦ CRUD æ“ä½œï¼ˆå·²å®ç°ï¼Œæš‚æœªä½¿ç”¨ï¼‰
  - ç»Ÿä¸€é”™è¯¯å¤„ç†

#### `src/main/services/spider.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ç½‘ç»œçˆ¬è™«æœåŠ¡
- **èŒè´£**:
  - ä» youshu.me æ£€ç´¢ä¹¦ç±ä¿¡æ¯
  - è§£æ HTML é¡µé¢ï¼ˆcheerioï¼‰
  - æå–ä¹¦ç±æ•°æ®ï¼ˆä¹¦åã€ä½œè€…ã€å°é¢ã€å­—æ•°ã€å¹³å°ã€æè¿°ï¼‰
  - é”™è¯¯å¤„ç†ï¼ˆè¶…æ—¶ã€ç½‘ç»œé”™è¯¯ï¼‰

#### `src/main/services/fileManager.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æ–‡ä»¶ç®¡ç†æœåŠ¡
- **èŒè´£**:
  - æ–‡ä»¶ä¿å­˜ï¼ˆUUID å‘½åï¼Œå¤åˆ¶åˆ°æŒ‡å®šç›®å½•ï¼‰
  - æ–‡ä»¶åˆ é™¤ï¼ˆç‰©ç†åˆ é™¤ï¼‰
  - æ–‡ä»¶æ‰“å¼€ï¼ˆä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¨‹åºï¼Œshell.openPathï¼‰
  - æ–‡ä»¶è·¯å¾„ç®¡ç†ï¼ˆgetFilePathã€getFileSizeï¼‰
  - ç›®å½•ç®¡ç†ï¼ˆè‡ªåŠ¨åˆ›å»º documents ç›®å½•ï¼‰
- **å­˜å‚¨ä½ç½®**: `{userData}/documents/`
- **å‘½åè§„åˆ™**: `{bookId}_{uuid}.{extension}`

#### `src/main/services/wordCounter.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æ–‡æ¡£å­—æ•°ç»Ÿè®¡
- **èŒè´£**:
  - æ”¯æŒå¤šç§æ ¼å¼ï¼ˆTXT, EPUB, PDF, DOCXï¼‰
  - TXT: ç¼–ç æ£€æµ‹ï¼ˆjschardetï¼‰ + è§£ç ï¼ˆiconv-liteï¼‰
  - EPUB: ç« èŠ‚æå–ï¼ˆepub åº“ï¼‰
  - PDF: æ–‡æœ¬æå–ï¼ˆpdf-parseï¼‰
  - DOCX: æ–‡æœ¬æå–ï¼ˆmammothï¼‰
  - æ··åˆå­—æ•°è®¡ç®—ï¼ˆä¸­æ–‡å­—ç¬¦æ•° + è‹±æ–‡å•è¯æ•°ï¼‰
  - ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œæ ¼å¼åŒ–

#### `src/main/services/cover.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: å°é¢ä¸‹è½½æœåŠ¡
- **èŒè´£**:
  - ä»ç½‘ç»œ URL ä¸‹è½½å°é¢å›¾ç‰‡
  - å›¾ç‰‡æ ¼å¼è½¬æ¢
  - å›¾ç‰‡å‹ç¼©
  - ä¿å­˜åˆ°æœ¬åœ°ï¼ˆuserData/covers/ï¼‰

---

### æ¸²æŸ“è¿›ç¨‹ï¼ˆVueï¼‰

#### `src/renderer/src/main.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: Vue åº”ç”¨å…¥å£
- **èŒè´£**:
  - åˆ›å»º Vue åº”ç”¨å®ä¾‹
  - æ³¨å†Œè·¯ç”±ã€çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
  - å¯¼å…¥ Element Plus æ ·å¼
  - æŒ‚è½½åº”ç”¨

#### `src/renderer/src/App.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æ ¹ç»„ä»¶
- **èŒè´£**:
  - åº”ç”¨æ•´ä½“å¸ƒå±€ï¼ˆå“åº”å¼ä¾§è¾¹æ ã€é¡¶éƒ¨å¯¼èˆªï¼‰
  - è·¯ç”±å‡ºå£ `<router-view>`
  - ä¸»é¢˜ç®¡ç†ï¼ˆæ˜æš—ä¸»é¢˜åˆ‡æ¢ï¼‰

#### `src/renderer/src/router/index.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: è·¯ç”±é…ç½®
- **èŒè´£**:
  - å®šä¹‰è·¯ç”±è§„åˆ™ï¼ˆHomeã€BookDetailã€AddBookã€Statisticsã€Settingsï¼‰
  - è·¯ç”±æ‡’åŠ è½½
  - è·¯ç”±å®ˆå«ï¼ˆå¦‚æœ‰éœ€è¦ï¼‰

#### `src/stores/book.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ä¹¦ç±çŠ¶æ€ç®¡ç†
- **èŒè´£**:
  - ç®¡ç†ä¹¦ç±åˆ—è¡¨ï¼ˆbooksï¼‰
  - ç®¡ç†å½“å‰ä¹¦ç±ï¼ˆcurrentBookï¼‰
  - ç®¡ç†æœç´¢å…³é”®è¯ï¼ˆsearchKeywordï¼‰
  - ç®¡ç†é€‰ä¸­çŠ¶æ€ï¼ˆselectedStatusï¼‰
  - ç®¡ç†åŠ è½½çŠ¶æ€ï¼ˆloadingï¼‰
  - æä¾›ç­›é€‰åçš„ä¹¦ç±åˆ—è¡¨ï¼ˆfilteredBooksï¼‰
  - æä¾›çŠ¶æ€ç»Ÿè®¡ï¼ˆstatusStatsï¼‰
  - æ”¯æŒæ‰¹é‡çŠ¶æ€æ›´æ–°ï¼ˆbatchUpdateStatusï¼‰
  - æä¾›æ‰€æœ‰ CRUD æ“ä½œ
  - ä¸ API å±‚äº¤äº’

#### `src/stores/ui.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: UI çŠ¶æ€ç®¡ç†
- **èŒè´£**:
  - ä¸»é¢˜ç®¡ç†ï¼ˆtheme: 'light' | 'dark' | 'auto'ï¼‰
  - è§†å›¾æ¨¡å¼ï¼ˆviewMode: 'grid' | 'list'ï¼‰
  - ä¾§è¾¹æ çŠ¶æ€ï¼ˆsidebarCollapsedï¼‰
  - ä¸»é¢˜æŒä¹…åŒ–ï¼ˆlocalStorageï¼‰
  - è·Ÿéšç³»ç»Ÿä¸»é¢˜

#### `src/stores/stats.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ç»Ÿè®¡æ•°æ®çŠ¶æ€ç®¡ç†
- **èŒè´£**:
  - åŸºäº book store è®¡ç®—ç»Ÿè®¡æ•°æ®
  - æä¾›å„ç§ç»Ÿè®¡ getters

#### `src/api/book.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ä¹¦ç± API å°è£…
- **èŒè´£**:
  - è°ƒç”¨ `window.electronAPI.book.*`
  - ç»Ÿä¸€é”™è¯¯å¤„ç†
  - æ•°æ®è½¬æ¢ï¼ˆsnake_case â†” camelCaseï¼‰

#### `src/api/document.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æ–‡æ¡£ API å°è£…
- **èŒè´£**:
  - è°ƒç”¨ `window.electronAPI.document.*`
  - æ–‡æ¡£ä¸Šä¼ ã€åˆ é™¤ã€æ‰“å¼€ã€å­—æ•°ç»Ÿè®¡ç­‰

#### `src/api/search.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æœç´¢ API å°è£…
- **èŒè´£**:
  - è°ƒç”¨ `window.electronAPI.search.youshu`
  - ç½‘ç»œæ£€ç´¢åŠŸèƒ½

#### `src/api/stats.ts` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ç»Ÿè®¡ API å°è£…
- **èŒè´£**:
  - è°ƒç”¨ `window.electronAPI.stats.*`
  - å„ç§ç»Ÿè®¡æ•°æ®è·å–

---

### è§†å›¾ç»„ä»¶

#### `src/components/stats/StatusStats.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: é˜…è¯»çŠ¶æ€ç»Ÿè®¡å±•ç¤ºç»„ä»¶
- **åŠŸèƒ½**:
  - æ˜¾ç¤ºå„çŠ¶æ€ä¸‹çš„ä¹¦ç±æ•°é‡ç»Ÿè®¡
  - ç‚¹å‡»ç»Ÿè®¡å¡ç‰‡å¯å¿«é€Ÿç­›é€‰å¯¹åº”çŠ¶æ€
  - ç½‘æ ¼å¸ƒå±€é€‚é…ä¸åŒå±å¹•å°ºå¯¸
  - è§†è§‰åé¦ˆæ˜¾ç¤ºå½“å‰é€‰ä¸­çŠ¶æ€
  - 5ç§çŠ¶æ€ï¼šæœªè¯»ã€é˜…è¯»ä¸­ã€å·²è¯»å®Œã€å¼ƒè¯»ã€å¾…è¯»

#### `src/views/Home.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: é¦–é¡µ - ä¹¦ç±åˆ—è¡¨
- **åŠŸèƒ½**:
  - å±•ç¤ºæ‰€æœ‰ä¹¦ç±ï¼ˆç½‘æ ¼/åˆ—è¡¨è§†å›¾ï¼‰
  - æœç´¢å’Œå…³é”®è¯ç­›é€‰ï¼ˆé˜²æŠ–æœç´¢ï¼‰
  - çŠ¶æ€ç»Ÿè®¡å±•ç¤ºï¼ˆStatusStats ç»„ä»¶ï¼‰
  - çŠ¶æ€ç­›é€‰ï¼ˆç‚¹å‡»çŠ¶æ€å¡ç‰‡ï¼‰
  - æ¸…ç©ºç­›é€‰æ¡ä»¶
  - è§†å›¾åˆ‡æ¢ï¼ˆDisplayModeToggleï¼‰
  - æ‰¹é‡é€‰æ‹©ï¼ˆCheckboxï¼‰
  - æ‰¹é‡åˆ é™¤
  - æ‰¹é‡çŠ¶æ€æ›´æ–°
  - åŠ è½½çŠ¶æ€å’Œç©ºçŠ¶æ€æç¤º

#### `src/views/BookDetail.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ä¹¦ç±è¯¦æƒ…é¡µ
- **åŠŸèƒ½**:
  - å±•ç¤ºå®Œæ•´ä¹¦ç±ä¿¡æ¯ï¼ˆå°é¢ã€å…ƒæ•°æ®ã€ç®€ä»‹ï¼‰
  - **æ–‡æ¡£ç®¡ç†**ï¼ˆâœ… é˜¶æ®µä¸ƒå·²å®Œæˆï¼‰
    - ä¸Šä¼ æ–‡æ¡£ï¼ˆTXT/EPUB/PDF/DOCXï¼‰
    - æ–‡æ¡£åˆ—è¡¨å±•ç¤ºï¼ˆæ–‡ä»¶åã€ç±»å‹ã€å¤§å°ã€å­—æ•°ã€ä¸Šä¼ æ—¶é—´ï¼‰
    - æ–‡æ¡£æ“ä½œï¼šæ‰“å¼€ã€é‡æ–°ç»Ÿè®¡å­—æ•°ã€åˆ é™¤
    - åŠ è½½çŠ¶æ€å’Œç©ºçŠ¶æ€
  - **å­—æ•°æ¥æºé€‰æ‹©**ï¼ˆâœ… é˜¶æ®µä¸ƒå·²å®Œæˆï¼‰
    - ä¸‰ä¸ªæ¥æºï¼šæ‰‹åŠ¨è¾“å…¥ã€ç½‘ç»œæ£€ç´¢ã€æ–‡æ¡£ç»Ÿè®¡
    - å¯éšæ—¶åˆ‡æ¢å­—æ•°æ¥æºï¼ˆç‚¹å‡»åˆ‡æ¢ï¼‰
    - Active çŠ¶æ€è§†è§‰åé¦ˆ
    - æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„å­—æ•°
  - ç¼–è¾‘æ¨¡å¼ï¼ˆå¤ç”¨ BookForm ç»„ä»¶ï¼‰
  - åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†

#### `src/views/AddBook.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: æ·»åŠ ä¹¦ç±é¡µ
- **åŠŸèƒ½**:
  - **ç½‘ç»œæ£€ç´¢**ï¼ˆTab 1ï¼‰
    - è¾“å…¥ä¹¦å/ä½œè€…æœç´¢
    - å±•ç¤ºæœç´¢ç»“æœåˆ—è¡¨
    - é€‰æ‹©ç»“æœå¹¶å¯¼å…¥
    - åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤º
  - **æ‰‹åŠ¨æ·»åŠ **ï¼ˆTab 2ï¼‰
    - ä½¿ç”¨ BookForm ç»„ä»¶
    - è¡¨å•éªŒè¯
    - å°é¢ä¸Šä¼ /é“¾æ¥
    - æäº¤å¤„ç†

#### `src/views/Statistics.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ç»Ÿè®¡åˆ†æé¡µé¢
- **åŠŸèƒ½**:
  - æ€»ä½“ç»Ÿè®¡ï¼ˆ6ä¸ªæ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡ï¼‰
    - æ€»ä¹¦ç±æ•°
    - æ€»å­—æ•°
    - å·²è¯»å®Œæ•°é‡
    - é˜…è¯»ä¸­æ•°é‡
    - å¹³å‡è¯„åˆ†
    - å…¶ä»–ç»Ÿè®¡
  - æ•°æ®å¯è§†åŒ–ï¼ˆ5ä¸ªå›¾è¡¨ï¼‰
    - ç±»å‹åˆ†å¸ƒï¼ˆé¥¼å›¾ï¼‰
    - å¹³å°åˆ†å¸ƒï¼ˆé¥¼å›¾ï¼‰
    - æœˆåº¦è¶‹åŠ¿ï¼ˆæŠ˜çº¿å›¾ï¼‰
    - é˜…è¯»çŠ¶æ€åˆ†å¸ƒï¼ˆæŸ±çŠ¶å›¾ï¼‰
    - å…¶ä»–å›¾è¡¨
  - å“åº”å¼å¸ƒå±€

---

### é€šç”¨ç»„ä»¶

#### `src/components/BookCard.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ä¹¦ç±å¡ç‰‡ï¼ˆç½‘æ ¼è§†å›¾ï¼‰
- **å±•ç¤º**:
  - å°é¢ï¼ˆæ”¯æŒå ä½å›¾ï¼‰
  - ä¹¦åã€ä½œè€…
  - å­—æ•°ã€è¯„åˆ†
  - é˜…è¯»çŠ¶æ€æ ‡ç­¾ï¼ˆå¯ç‚¹å‡»ï¼‰
- **åŠŸèƒ½**:
  - ç‚¹å‡»çŠ¶æ€å¾½ç« å¿«é€Ÿåˆ‡æ¢é˜…è¯»çŠ¶æ€
  - æ”¯æŒä¸‹æ‹‰èœå•é€‰æ‹©5ç§çŠ¶æ€ï¼ˆæœªè¯»ã€é˜…è¯»ä¸­ã€å·²è¯»å®Œã€å¼ƒè¯»ã€å¾…è¯»ï¼‰
  - çŠ¶æ€æ›´æ–°æˆåŠŸæç¤º
  - æœç´¢å…³é”®å­—é«˜äº®
  - æ‚¬æµ®äº¤äº’æ•ˆæœ

#### `src/renderer/src/components/BookForm.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ä¹¦ç±è¡¨å•
- **åŠŸèƒ½**:
  - æ‰€æœ‰å­—æ®µçš„è¾“å…¥ï¼ˆä¹¦åã€ä½œè€…ã€å°é¢ã€å¹³å°ã€ç±»å‹ã€æè¿°ã€å­—æ•°ç­‰ï¼‰
  - å°é¢ä¸Šä¼ /é“¾æ¥
  - å­—æ•°æ¥æºé€‰æ‹©
  - å­—æ®µéªŒè¯
  - æ”¯æŒç¼–è¾‘æ¨¡å¼

#### `src/renderer/src/components/NetworkSearch.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: ç½‘ç»œæ£€ç´¢ç»„ä»¶
- **åŠŸèƒ½**:
  - è¾“å…¥ä¹¦å/ä½œè€…æœç´¢
  - å±•ç¤ºæœç´¢ç»“æœåˆ—è¡¨
  - é€‰æ‹©ç»“æœå¹¶å¯¼å…¥
  - åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤º

#### `src/renderer/src/components/DisplayModeToggle.vue` âœ… å·²å®Œæˆ
- **ä½œç”¨**: è§†å›¾åˆ‡æ¢ç»„ä»¶
- **åŠŸèƒ½**:
  - ç½‘æ ¼/åˆ—è¡¨è§†å›¾åˆ‡æ¢
  - çŠ¶æ€æŒä¹…åŒ–

---

## ğŸ—‚ï¸ æ•°æ®æµå‘

### æ·»åŠ ä¹¦ç±æµç¨‹

```
User Action (AddBook.vue)
    â†“
Button Click
    â†“
Call bookStore.createBook(data)
    â†“
bookStore (Pinia Store)
    â†“
Call bookAPI.create(data)
    â†“
bookAPI (src/api/book.ts)
    â†“
window.electronAPI.book.create(data)
    â†“
IPC (electron/preload.ts)
    â†“
bookHandler (electron/ipc/bookHandler.ts)
    â†“
database.createBook(data) (electron/services/database.ts)
    â†“
SQLite (userData/ibook.db)
    â†“
Return Book Object
    â†“
Update Pinia Store
    â†“
Re-render UI
```

### æ–‡æ¡£ä¸Šä¼ æµç¨‹ â­ é˜¶æ®µä¸ƒå·²å®Œæˆ

```
User Action (BookDetail.vue)
    â†“
Click "ä¸Šä¼ æ–‡æ¡£" Button
    â†“
Call window.api.document.selectFile()
    â†“
IPC â†’ documentHandler â†’ dialog.showOpenDialog()
    â†“
User selects file
    â†“
Call window.api.document.upload(filePath, bookId)
    â†“
IPC (electron/preload.ts)
    â†“
documentHandler (electron/ipc/documentHandler.ts)
    â†“
fileManager.saveFile(filePath, bookId)
    â”œâ”€ Copy file to userData/documents/
    â””â”€ Return: {bookId}_{uuid}.{ext}
    â†“
wordCounter.countWords(savedFilePath)
    â”œâ”€ Detect file type (.txt/.epub/.pdf/.docx)
    â”œâ”€ Extract text content
    â””â”€ Calculate word count (Chinese chars + English words)
    â†“
database.createDocument(documentInput)
    â””â”€ Insert into documents table
    â†“
Return Document Object
    â†“
Update UI (documents list + word count)
    â†“
Show confirmation dialog
    â””â”€ "æ˜¯å¦ä½¿ç”¨æ–‡æ¡£å­—æ•°ä½œä¸ºä¹¦ç±å­—æ•°ï¼Ÿ"
```

### é˜…è¯»çŠ¶æ€ç®¡ç†æµç¨‹ â­ é˜¶æ®µå…«8.3å·²å®Œæˆ

```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š

1. çŠ¶æ€ç»Ÿè®¡ç­›é€‰ï¼š
   User clicks status card in StatusStats
   â†“
   Call handleStatusClick(status)
   â†“
   bookStore.setSelectedStatus(status)
   â†“
   Update filteredBooks computed property
   â†“
   Re-render book list with filtered results

2. å¿«æ·çŠ¶æ€åˆ‡æ¢ï¼š
   User clicks status badge on BookCard
   â†“
   Show status dropdown menu
   â†“
   User selects new status
   â†“
   Call updateReadingStatus(status)
   â†“
   bookStore.updateBook(bookId, { readingStatus: status })
   â†“
   IPC â†’ bookHandler â†’ database.updateBook()
   â†“
   Update local book state
   â†“
   Update status display + Show success message
```

---

## ğŸ“¦ æ‰“åŒ…åçš„ç›®å½•ç»“æ„

```
release/
â”œâ”€â”€ win-unpacked/                    # Windows æœªæ‰“åŒ…ç‰ˆæœ¬ï¼ˆç»¿è‰²ç‰ˆï¼‰
â”‚   â”œâ”€â”€ iBook.exe
â”‚   â”œâ”€â”€ resources/
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ iBook Setup 1.0.0.exe           # Windows å®‰è£…åŒ…
```

**ç”¨æˆ·æ•°æ®ç›®å½•** (Windows):
```
C:/Users/{username}/AppData/Roaming/iBook/
â”œâ”€â”€ ibook.db                        # SQLite æ•°æ®åº“
â”œâ”€â”€ documents/                      # ä¸Šä¼ çš„æ–‡æ¡£
â”‚   â”œâ”€â”€ 1_uuid.txt
â”‚   â”œâ”€â”€ 2_uuid.epub
â”‚   â””â”€â”€ ...
â”œâ”€â”€ covers/                         # ä¸‹è½½çš„å°é¢
â”‚   â”œâ”€â”€ 1.jpg
â”‚   â”œâ”€â”€ 2.jpg
â”‚   â””â”€â”€ ...
â””â”€â”€ backups/                        # å¤‡ä»½æ–‡ä»¶
    â”œâ”€â”€ backup_20240101.json
    â”œâ”€â”€ backup_20240108.json
    â””â”€â”€ ...
```

---

## ğŸ¯ å…³é”®æŠ€æœ¯ç‚¹

### ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹é€šä¿¡

**ä¸ºä»€ä¹ˆåˆ†ç¦»ï¼Ÿ**
- **å®‰å…¨æ€§**: æ¸²æŸ“è¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—® Node.js API
- **æ€§èƒ½**: ä¸»è¿›ç¨‹å¤„ç†è€—æ—¶æ“ä½œï¼Œä¸é˜»å¡ UI
- **æ¶æ„æ¸…æ™°**: èŒè´£åˆ†ç¦»

**å¦‚ä½•é€šä¿¡ï¼Ÿ**
- é€šè¿‡ IPC (Inter-Process Communication)
- `ipcMain` (ä¸»è¿›ç¨‹) å’Œ `ipcRenderer` (æ¸²æŸ“è¿›ç¨‹)
- `contextBridge` æš´éœ²å®‰å…¨çš„ API

### æ•°æ®æŒä¹…åŒ–

**ä¸ºä»€ä¹ˆç”¨ SQLiteï¼Ÿ**
- è½»é‡çº§ï¼Œæ— éœ€å®‰è£…
- æ”¯æŒ SQL æŸ¥è¯¢
- å•æ–‡ä»¶ï¼Œæ˜“äºå¤‡ä»½
- æ€§èƒ½ä¼˜ç§€

**æ•°æ®å®‰å…¨ï¼š**
- å®šæœŸè‡ªåŠ¨å¤‡ä»½
- æ”¯æŒæ‰‹åŠ¨å¯¼å‡º
- WAL æ¨¡å¼é˜²æ­¢æŸå

### çŠ¶æ€ç®¡ç†

**ä¸ºä»€ä¹ˆç”¨ Piniaï¼Ÿ**
- Vue 3 å®˜æ–¹æ¨è
- TypeScript æ”¯æŒå¥½
- API ç®€æ´
- æ¨¡å—åŒ–

---

## ğŸš€ å¼€å‘å»ºè®®

### 1. æŒ‰æ¨¡å—å¼€å‘

ä¸è¦è¯•å›¾ä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰åŠŸèƒ½ï¼ŒæŒ‰æ¨¡å—é€æ­¥å¼€å‘ï¼š
1. æ•°æ®åº“ â†’ ä¸»è¿›ç¨‹ â†’ IPC â†’ å‰ç«¯ API â†’ UI
2. å…ˆå®ç°åŸºç¡€åŠŸèƒ½ï¼Œå†æ·»åŠ é«˜çº§åŠŸèƒ½

### 2. å…³æ³¨ç‚¹åˆ†ç¦»

- **ä¸»è¿›ç¨‹**: æ•°æ®ã€æ–‡ä»¶ã€ç½‘ç»œï¼ˆé‡é€»è¾‘ï¼‰
- **æ¸²æŸ“è¿›ç¨‹**: å±•ç¤ºã€äº¤äº’ï¼ˆé‡è§†å›¾ï¼‰
- **API å±‚**: ä½œä¸ºä¸»è¿›ç¨‹å’Œ UI çš„æ¡¥æ¢

### 3. ç±»å‹å®‰å…¨

å……åˆ†åˆ©ç”¨ TypeScriptï¼š
- å®šä¹‰æ¸…æ™°çš„æ¥å£
- é¿å…ä½¿ç”¨ `any`
- ä½¿ç”¨æ³›å‹

### 4. é”™è¯¯å¤„ç†

æ¯ä¸€å±‚éƒ½è¦å¤„ç†é”™è¯¯ï¼š
- ä¸»è¿›ç¨‹ï¼šæ•è·å¼‚å¸¸ï¼Œè®°å½•æ—¥å¿—
- IPCï¼šè¿”å›é”™è¯¯ä¿¡æ¯
- API å±‚ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
- UIï¼šå‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸ“š å‚è€ƒèµ„æº

- **Electron å®˜æ–¹æ–‡æ¡£**: https://www.electronjs.org/docs
- **Vue 3 æ–‡æ¡£**: https://vuejs.org/
- **Pinia æ–‡æ¡£**: https://pinia.vuejs.org/
- **Element Plus æ–‡æ¡£**: https://element-plus.org/
- **Better SQLite3**: https://github.com/WiseLibs/better-sqlite3

---

å¸Œæœ›è¿™ä»½ç»“æ„è¯´æ˜èƒ½å¸®åŠ©ä½ å¿«é€Ÿç†è§£é¡¹ç›®ï¼ğŸ‰

