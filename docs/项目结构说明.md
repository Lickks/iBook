# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
book-store/                              # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ electron/                            # Electron ä¸»è¿›ç¨‹ä»£ç 
â”‚   â”œâ”€â”€ main.ts                         # â­ ä¸»è¿›ç¨‹å…¥å£ï¼Œåˆ›å»ºçª—å£ã€åˆå§‹åŒ–æ•°æ®åº“
â”‚   â”œâ”€â”€ preload.ts                      # â­ é¢„åŠ è½½è„šæœ¬ï¼Œæš´éœ²å®‰å…¨çš„ API ç»™æ¸²æŸ“è¿›ç¨‹
â”‚   â”‚
â”‚   â”œâ”€â”€ ipc/                            # IPC é€šä¿¡å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ bookHandler.ts             # ä¹¦ç±æ“ä½œçš„ IPC å¤„ç†
â”‚   â”‚   â”œâ”€â”€ documentHandler.ts         # æ–‡æ¡£æ“ä½œçš„ IPC å¤„ç†
â”‚   â”‚   â”œâ”€â”€ searchHandler.ts           # æœç´¢æ“ä½œçš„ IPC å¤„ç†
â”‚   â”‚   â””â”€â”€ systemHandler.ts           # ç³»ç»Ÿæ“ä½œï¼ˆå¤‡ä»½ã€å¯¼å‡ºç­‰ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                       # ä¸»è¿›ç¨‹ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ database.ts                # â­ æ•°æ®åº“æœåŠ¡ï¼ˆSQLite CRUDï¼‰
â”‚   â”‚   â”œâ”€â”€ spider.ts                  # â­ çˆ¬è™«æœåŠ¡ï¼ˆyoushu.meï¼‰
â”‚   â”‚   â”œâ”€â”€ fileManager.ts             # â­ æ–‡ä»¶ç®¡ç†æœåŠ¡ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”‚   â”œâ”€â”€ wordCounter.ts             # â­ å­—æ•°ç»Ÿè®¡æœåŠ¡ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”‚   â”œâ”€â”€ backupService.ts           # å¤‡ä»½æœåŠ¡
â”‚   â”‚   â””â”€â”€ updateService.ts           # è‡ªåŠ¨æ›´æ–°æœåŠ¡
â”‚   â”‚
â”‚   â””â”€â”€ utils/                          # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ logger.ts                  # æ—¥å¿—å·¥å…·
â”‚       â”œâ”€â”€ config.ts                  # é…ç½®ç®¡ç†
â”‚       â””â”€â”€ helper.ts                  # è¾…åŠ©å‡½æ•°
â”‚
â”œâ”€â”€ src/                                # Vue æ¸²æŸ“è¿›ç¨‹ä»£ç 
â”‚   â”œâ”€â”€ main.ts                        # â­ Vue åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ App.vue                        # â­ æ ¹ç»„ä»¶ï¼ŒåŒ…å«å¸ƒå±€
â”‚   â”‚
â”‚   â”œâ”€â”€ router/                         # Vue Router è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts                   # â­ è·¯ç”±å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                         # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ book.ts                    # â­ ä¹¦ç±çŠ¶æ€ï¼ˆbooks, currentBookï¼‰
â”‚   â”‚   â”œâ”€â”€ ui.ts                      # â­ UI çŠ¶æ€ï¼ˆä¸»é¢˜ã€å¸ƒå±€ï¼‰
â”‚   â”‚   â”œâ”€â”€ stats.ts                   # ç»Ÿè®¡æ•°æ®çŠ¶æ€
â”‚   â”‚   â””â”€â”€ user.ts                    # ç”¨æˆ·è®¾ç½®çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ views/                          # é¡µé¢ç»„ä»¶ï¼ˆè·¯ç”±çº§ï¼‰
â”‚   â”‚   â”œâ”€â”€ Home.vue                   # â­ é¦–é¡µ - ä¹¦ç±åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ BookDetail.vue             # â­ ä¹¦ç±è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ AddBook.vue                # â­ æ·»åŠ ä¹¦ç±é¡µ
â”‚   â”‚   â”œâ”€â”€ Statistics.vue             # ç»Ÿè®¡åˆ†æé¡µ
â”‚   â”‚   â”œâ”€â”€ Settings.vue               # è®¾ç½®é¡µ
â”‚   â”‚   â””â”€â”€ About.vue                  # å…³äºé¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                     # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/                    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.vue            # é¡¶éƒ¨å¯¼èˆª
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.vue           # ä¾§è¾¹æ 
â”‚   â”‚   â”‚   â””â”€â”€ Footer.vue            # åº•éƒ¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ book/                      # ä¹¦ç±ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ BookCard.vue          # â­ ä¹¦ç±å¡ç‰‡ï¼ˆç½‘æ ¼è§†å›¾ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ BookListItem.vue      # â­ ä¹¦ç±åˆ—è¡¨é¡¹ï¼ˆåˆ—è¡¨è§†å›¾ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ BookGrid.vue          # ä¹¦ç±ç½‘æ ¼å®¹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ BookList.vue          # ä¹¦ç±åˆ—è¡¨å®¹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ BookForm.vue          # â­ ä¹¦ç±è¡¨å•ï¼ˆæ·»åŠ /ç¼–è¾‘ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ BookCover.vue         # ä¹¦ç±å°é¢å±•ç¤º
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ document/                  # æ–‡æ¡£ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUpload.vue        # â­ æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentList.vue      # æ–‡æ¡£åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ DocumentPreview.vue   # æ–‡æ¡£é¢„è§ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ search/                    # æœç´¢ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBar.vue         # â­ æœç´¢æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchResult.vue      # æœç´¢ç»“æœå±•ç¤º
â”‚   â”‚   â”‚   â””â”€â”€ AdvancedFilter.vue    # é«˜çº§ç­›é€‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stats/                     # ç»Ÿè®¡ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ StatusStats.vue       # â­ çŠ¶æ€ç»Ÿè®¡å±•ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ StatCard.vue          # ç»Ÿè®¡å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ PieChart.vue          # é¥¼å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ LineChart.vue         # æŠ˜çº¿å›¾
â”‚   â”‚   â”‚   â””â”€â”€ BarChart.vue          # æŸ±çŠ¶å›¾
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ common/                    # é€šç”¨ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ RatingStars.vue       # â­ æ˜Ÿçº§è¯„åˆ†
â”‚   â”‚       â”œâ”€â”€ ProgressBar.vue       # â­ è¿›åº¦æ¡ â¸ï¸ å·²åºŸå¼ƒ
â”‚   â”‚       â”œâ”€â”€ TagSelector.vue       # æ ‡ç­¾é€‰æ‹©å™¨
â”‚   â”‚       â”œâ”€â”€ ConfirmDialog.vue     # ç¡®è®¤å¯¹è¯æ¡†
â”‚   â”‚       â”œâ”€â”€ Loading.vue           # åŠ è½½åŠ¨ç”»
â”‚   â”‚       â””â”€â”€ EmptyState.vue        # ç©ºçŠ¶æ€å±•ç¤º
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                            # API æ¥å£å±‚ï¼ˆè°ƒç”¨ Electron APIï¼‰
â”‚   â”‚   â”œâ”€â”€ book.ts                    # â­ ä¹¦ç± API
â”‚   â”‚   â”œâ”€â”€ document.ts                # â­ æ–‡æ¡£ API
â”‚   â”‚   â”œâ”€â”€ search.ts                  # â­ æœç´¢ API
â”‚   â”‚   â”œâ”€â”€ stats.ts                   # ç»Ÿè®¡ API
â”‚   â”‚   â””â”€â”€ system.ts                  # ç³»ç»Ÿ API
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                          # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ book.ts                    # â­ Book ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ document.ts                # â­ Document ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ note.ts                    # Note ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ tag.ts                     # Tag ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ api.ts                     # API å“åº”ç±»å‹
â”‚   â”‚   â”œâ”€â”€ ui.ts                      # UI ç›¸å…³ç±»å‹
â”‚   â”‚   â””â”€â”€ global.d.ts                # â­ å…¨å±€ç±»å‹å£°æ˜ï¼ˆwindow.electronAPIï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ format.ts                  # æ ¼å¼åŒ–å‡½æ•°ï¼ˆæ—¥æœŸã€æ•°å­—ã€å­—æ•°ï¼‰
â”‚   â”‚   â”œâ”€â”€ validator.ts               # éªŒè¯å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ helper.ts                  # è¾…åŠ©å‡½æ•°
â”‚   â”‚   â””â”€â”€ constants.ts               # å¸¸é‡å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/                    # Vue ç»„åˆå¼å‡½æ•°ï¼ˆHooksï¼‰
â”‚   â”‚   â”œâ”€â”€ useBooks.ts                # ä¹¦ç±ç›¸å…³é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useSearch.ts               # æœç´¢ç›¸å…³é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useTheme.ts                # ä¸»é¢˜ç›¸å…³é€»è¾‘
â”‚   â”‚   â””â”€â”€ useStats.ts                # ç»Ÿè®¡ç›¸å…³é€»è¾‘
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                         # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ images/                    # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ logo.png
â”‚   â”‚   â”‚   â”œâ”€â”€ default-cover.png     # é»˜è®¤å°é¢
â”‚   â”‚   â”‚   â””â”€â”€ empty-state.svg       # ç©ºçŠ¶æ€æ’å›¾
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ icons/                     # å›¾æ ‡
â”‚   â”‚   â”‚   â””â”€â”€ svg/                  # SVG å›¾æ ‡
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ styles/                    # æ ·å¼æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ global.css            # å…¨å±€æ ·å¼
â”‚   â”‚       â”œâ”€â”€ variables.css         # CSS å˜é‡ï¼ˆä¸»é¢˜é¢œè‰²ï¼‰
â”‚   â”‚       â”œâ”€â”€ reset.css             # æ ·å¼é‡ç½®
â”‚   â”‚       â””â”€â”€ transitions.css       # è¿‡æ¸¡åŠ¨ç”»
â”‚   â”‚
â”‚   â””â”€â”€ constants/                      # å¸¸é‡å®šä¹‰
â”‚       â”œâ”€â”€ index.ts                   # å¯¼å‡ºæ‰€æœ‰å¸¸é‡
â”‚       â”œâ”€â”€ readingStatus.ts          # é˜…è¯»çŠ¶æ€å¸¸é‡
â”‚       â”œâ”€â”€ categories.ts             # åˆ†ç±»å¸¸é‡
â”‚       â””â”€â”€ platforms.ts              # å¹³å°å¸¸é‡
â”‚
â”œâ”€â”€ database/                           # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ schema.sql                     # â­ æ•°æ®åº“ç»“æ„å®šä¹‰
â”‚   â”œâ”€â”€ migrations/                    # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ 001_init.sql
â”‚   â”‚   â”œâ”€â”€ 002_add_tags.sql
â”‚   â”‚   â””â”€â”€ 003_add_progress.sql
â”‚   â””â”€â”€ seeds/                         # åˆå§‹æ•°æ®ï¼ˆå¯é€‰ï¼‰
â”‚       â””â”€â”€ default_tags.sql
â”‚
â”œâ”€â”€ public/                             # å…¬å…±èµ„æºï¼ˆä¸ä¼šè¢«æ‰“åŒ…å¤„ç†ï¼‰
â”‚   â”œâ”€â”€ icon.png                       # åº”ç”¨å›¾æ ‡ï¼ˆ1024x1024ï¼‰
â”‚   â”œâ”€â”€ icon.ico                       # Windows å›¾æ ‡
â”‚   â””â”€â”€ default-cover.png              # é»˜è®¤å°é¢
â”‚
â”œâ”€â”€ docs/                               # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ éœ€æ±‚åˆ†ææ–‡æ¡£.md                 # â­ è¯¦ç»†éœ€æ±‚åˆ†æ
â”‚   â”œâ”€â”€ æŠ€æœ¯é€‰å‹ä¸æ¶æ„è®¾è®¡.md           # â­ æŠ€æœ¯æ ˆå’Œæ¶æ„
â”‚   â”œâ”€â”€ å¿«é€Ÿå¯åŠ¨æŒ‡å—.md                 # â­ å¼€å‘ç¯å¢ƒæ­å»º
â”‚   â”œâ”€â”€ è¡¥å……åŠŸèƒ½ä¸è®¾è®¡è¯´æ˜.md           # â­ è¡¥å……åŠŸèƒ½å’Œè¾¹ç•Œåœºæ™¯
â”‚   â”œâ”€â”€ å¼€å‘ä»»åŠ¡æ¸…å•.md                 # â­ è¯¦ç»†çš„å¼€å‘ä»»åŠ¡
â”‚   â”œâ”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md                 # â­ æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ APIæ–‡æ¡£.md                     # API æ¥å£æ–‡æ¡£
â”‚   â””â”€â”€ ä½¿ç”¨æ‰‹å†Œ.md                    # ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
â”‚
â”œâ”€â”€ tests/                              # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ unit/                          # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ services/                 # æœåŠ¡å±‚æµ‹è¯•
â”‚   â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â””â”€â”€ e2e/                           # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚       â””â”€â”€ app.spec.ts
â”‚
â”œâ”€â”€ scripts/                            # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ build.js                       # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ release.js                     # å‘å¸ƒè„šæœ¬
â”‚   â””â”€â”€ clean.js                       # æ¸…ç†è„šæœ¬
â”‚
â”œâ”€â”€ .vscode/                            # VSCode é…ç½®
â”‚   â”œâ”€â”€ extensions.json                # æ¨èæ’ä»¶
â”‚   â””â”€â”€ settings.json                  # é¡¹ç›®è®¾ç½®
â”‚
â”œâ”€â”€ .gitignore                          # â­ Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .eslintrc.js                        # ESLint é…ç½®
â”œâ”€â”€ .prettierrc                         # Prettier é…ç½®
â”œâ”€â”€ package.json                        # â­ é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ pnpm-lock.yaml                      # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ tsconfig.json                       # â­ TypeScript é…ç½®
â”œâ”€â”€ tsconfig.node.json                  # Node.js ç¯å¢ƒ TS é…ç½®
â”œâ”€â”€ vite.config.ts                      # â­ Vite æ„å»ºé…ç½®
â”œâ”€â”€ electron-builder.json               # â­ Electron æ‰“åŒ…é…ç½®
â”œâ”€â”€ README.md                           # â­ é¡¹ç›®è¯´æ˜
â””â”€â”€ LICENSE                             # å¼€æºåè®®
```

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### ä¸»è¿›ç¨‹ï¼ˆElectronï¼‰

#### `electron/main.ts`
- **ä½œç”¨**: Electron åº”ç”¨çš„å…¥å£
- **èŒè´£**:
  - åˆ›å»ºä¸»çª—å£
  - åˆå§‹åŒ–æ•°æ®åº“
  - æ³¨å†Œ IPC å¤„ç†å™¨
  - ç®¡ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸ

#### `electron/preload.ts`
- **ä½œç”¨**: æ¸²æŸ“è¿›ç¨‹ä¸ä¸»è¿›ç¨‹çš„æ¡¥æ¢
- **èŒè´£**:
  - é€šè¿‡ `contextBridge` æš´éœ²å®‰å…¨çš„ API
  - æä¾› TypeScript ç±»å‹å®šä¹‰
  - éš”ç¦»æ¸²æŸ“è¿›ç¨‹å’Œ Node.js ç¯å¢ƒ

#### `electron/services/database.ts`
- **ä½œç”¨**: æ•°æ®åº“æ“ä½œå°è£…
- **èŒè´£**:
  - SQLite è¿æ¥ç®¡ç†
  - æä¾› CRUD æ–¹æ³•
  - äº‹åŠ¡å¤„ç†
  - é”™è¯¯å¤„ç†

#### `electron/services/spider.ts`
- **ä½œç”¨**: ç½‘ç»œçˆ¬è™«æœåŠ¡
- **èŒè´£**:
  - ä» youshu.me æ£€ç´¢ä¹¦ç±ä¿¡æ¯
  - è§£æ HTML é¡µé¢
  - æå–ä¹¦ç±æ•°æ®
  - ä¸‹è½½å°é¢å›¾ç‰‡

#### `electron/services/fileManager.ts` â­ å·²å®Œæˆ
- **ä½œç”¨**: æ–‡ä»¶ç®¡ç†æœåŠ¡
- **èŒè´£**:
  - æ–‡ä»¶ä¿å­˜ï¼ˆUUID å‘½åï¼‰
  - æ–‡ä»¶åˆ é™¤
  - æ–‡ä»¶æ‰“å¼€ï¼ˆç³»ç»Ÿé»˜è®¤ç¨‹åºï¼‰
  - æ–‡ä»¶è·¯å¾„ç®¡ç†
  - æ–‡ä»¶å¤§å°è·å–
- **å­˜å‚¨ä½ç½®**: `{userData}/documents/`
- **å‘½åè§„åˆ™**: `{bookId}_{uuid}.{extension}`

#### `electron/services/wordCounter.ts` â­ å·²å®Œæˆ
- **ä½œç”¨**: æ–‡æ¡£å­—æ•°ç»Ÿè®¡
- **èŒè´£**:
  - æ”¯æŒå¤šç§æ ¼å¼ï¼ˆTXT, EPUB, PDF, DOCXï¼‰
  - TXT: ç¼–ç æ£€æµ‹ï¼ˆjschardetï¼‰ + è§£ç ï¼ˆiconv-liteï¼‰
  - EPUB: ç« èŠ‚æå–ï¼ˆepub åº“ï¼‰
  - PDF: æ–‡æœ¬æå–ï¼ˆpdf-parseï¼‰
  - DOCX: æ–‡æœ¬æå–ï¼ˆmammothï¼‰
  - æ··åˆå­—æ•°è®¡ç®—ï¼ˆä¸­æ–‡å­—ç¬¦æ•° + è‹±æ–‡å•è¯æ•°ï¼‰

---

### æ¸²æŸ“è¿›ç¨‹ï¼ˆVueï¼‰

#### `src/main.ts`
- **ä½œç”¨**: Vue åº”ç”¨å…¥å£
- **èŒè´£**:
  - åˆ›å»º Vue åº”ç”¨å®ä¾‹
  - æ³¨å†Œè·¯ç”±ã€çŠ¶æ€ç®¡ç†
  - æŒ‚è½½åº”ç”¨

#### `src/App.vue`
- **ä½œç”¨**: æ ¹ç»„ä»¶
- **èŒè´£**:
  - åº”ç”¨æ•´ä½“å¸ƒå±€
  - è·¯ç”±å‡ºå£ `<router-view>`
  - ä¸»é¢˜ç®¡ç†

#### `src/router/index.ts`
- **ä½œç”¨**: è·¯ç”±é…ç½®
- **èŒè´£**:
  - å®šä¹‰è·¯ç”±è§„åˆ™
  - è·¯ç”±å®ˆå«
  - è·¯ç”±æ‡’åŠ è½½

#### `src/stores/book.ts`
- **ä½œç”¨**: ä¹¦ç±çŠ¶æ€ç®¡ç†
- **èŒè´£**:
  - ç®¡ç†ä¹¦ç±åˆ—è¡¨
  - ç®¡ç†å½“å‰ä¹¦ç±
  - ç®¡ç†é˜…è¯»çŠ¶æ€ç­›é€‰
  - æä¾›çŠ¶æ€ç»Ÿè®¡è®¡ç®—
  - æ”¯æŒæ‰¹é‡çŠ¶æ€æ›´æ–°
  - æä¾› getters å’Œ actions
  - ä¸ API å±‚äº¤äº’

#### `src/api/book.ts`
- **ä½œç”¨**: ä¹¦ç± API å°è£…
- **èŒè´£**:
  - è°ƒç”¨ `window.electronAPI.book.*`
  - ç»Ÿä¸€é”™è¯¯å¤„ç†
  - æ•°æ®è½¬æ¢

---

### è§†å›¾ç»„ä»¶

#### `src/components/stats/StatusStats.vue` â­ æ–°å¢
- **ä½œç”¨**: é˜…è¯»çŠ¶æ€ç»Ÿè®¡å±•ç¤ºç»„ä»¶
- **åŠŸèƒ½**:
  - æ˜¾ç¤ºå„çŠ¶æ€ä¸‹çš„ä¹¦ç±æ•°é‡ç»Ÿè®¡
  - ç‚¹å‡»ç»Ÿè®¡å¡ç‰‡å¯å¿«é€Ÿç­›é€‰å¯¹åº”çŠ¶æ€
  - ç½‘æ ¼å¸ƒå±€é€‚é…ä¸åŒå±å¹•å°ºå¯¸
  - è§†è§‰åé¦ˆæ˜¾ç¤ºå½“å‰é€‰ä¸­çŠ¶æ€

#### `src/views/Home.vue`
- **ä½œç”¨**: é¦–é¡µ - ä¹¦ç±åˆ—è¡¨
- **åŠŸèƒ½**:
  - å±•ç¤ºæ‰€æœ‰ä¹¦ç±ï¼ˆç½‘æ ¼/åˆ—è¡¨è§†å›¾ï¼‰
  - æœç´¢å’Œå…³é”®è¯ç­›é€‰
  - çŠ¶æ€ç»Ÿè®¡å±•ç¤ºå’ŒçŠ¶æ€ç­›é€‰
  - æ¸…ç©ºç­›é€‰æ¡ä»¶
  - è§†å›¾åˆ‡æ¢

#### `src/views/BookDetail.vue`
- **ä½œç”¨**: ä¹¦ç±è¯¦æƒ…é¡µ
- **åŠŸèƒ½**:
  - å±•ç¤ºå®Œæ•´ä¹¦ç±ä¿¡æ¯
  - **æ–‡æ¡£ç®¡ç†**ï¼ˆâ­ é˜¶æ®µä¸ƒå·²å®Œæˆï¼‰
    - ä¸Šä¼ æ–‡æ¡£ï¼ˆTXT/EPUB/PDF/DOCXï¼‰
    - æ–‡æ¡£åˆ—è¡¨å±•ç¤º
    - æ‰“å¼€ã€åˆ é™¤ã€é‡æ–°ç»Ÿè®¡å­—æ•°
  - **å­—æ•°æ¥æºé€‰æ‹©**ï¼ˆâ­ é˜¶æ®µä¸ƒå·²å®Œæˆï¼‰
    - ä¸‰ä¸ªæ¥æºï¼šæ‰‹åŠ¨è¾“å…¥ã€ç½‘ç»œæ£€ç´¢ã€æ–‡æ¡£ç»Ÿè®¡
    - å¯éšæ—¶åˆ‡æ¢å­—æ•°æ¥æº
    - æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„å­—æ•°
  - å±•ç¤ºç¬”è®°
  - ç¼–è¾‘å’Œåˆ é™¤

#### `src/views/AddBook.vue`
- **ä½œç”¨**: æ·»åŠ ä¹¦ç±é¡µ
- **åŠŸèƒ½**:
  - ç½‘ç»œæ£€ç´¢ï¼ˆTab 1ï¼‰
  - æ‰‹åŠ¨æ·»åŠ ï¼ˆTab 2ï¼‰
  - è¡¨å•éªŒè¯
  - æäº¤å¤„ç†

---

### é€šç”¨ç»„ä»¶

#### `src/components/book/BookCard.vue`
- **ä½œç”¨**: ä¹¦ç±å¡ç‰‡ï¼ˆç½‘æ ¼è§†å›¾ï¼‰
- **å±•ç¤º**:
  - å°é¢
  - ä¹¦åã€ä½œè€…
  - å­—æ•°ã€è¯„åˆ†
  - é˜…è¯»çŠ¶æ€æ ‡ç­¾
- **åŠŸèƒ½**:
  - ç‚¹å‡»çŠ¶æ€å¾½ç« å¿«é€Ÿåˆ‡æ¢é˜…è¯»çŠ¶æ€
  - æ”¯æŒä¸‹æ‹‰èœå•é€‰æ‹©5ç§çŠ¶æ€ï¼ˆæœªè¯»ã€é˜…è¯»ä¸­ã€å·²è¯»å®Œã€å¼ƒè¯»ã€å¾…è¯»ï¼‰
  - çŠ¶æ€æ›´æ–°æˆåŠŸæç¤º

#### `src/components/book/BookForm.vue`
- **ä½œç”¨**: ä¹¦ç±è¡¨å•
- **åŠŸèƒ½**:
  - æ‰€æœ‰å­—æ®µçš„è¾“å…¥
  - å°é¢ä¸Šä¼ 
  - å­—æ®µéªŒè¯
  - æ”¯æŒç¼–è¾‘æ¨¡å¼

#### `src/components/document/FileUpload.vue`
- **ä½œç”¨**: æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
- **åŠŸèƒ½**:
  - ç‚¹å‡»ä¸Šä¼ 
  - æ‹–æ‹½ä¸Šä¼ 
  - è¿›åº¦æ˜¾ç¤º
  - æ ¼å¼éªŒè¯

#### `src/components/common/RatingStars.vue`
- **ä½œç”¨**: æ˜Ÿçº§è¯„åˆ†ç»„ä»¶
- **åŠŸèƒ½**:
  - å±•ç¤ºè¯„åˆ†
  - äº¤äº’å¼è¯„åˆ†
  - æ”¯æŒåŠæ˜Ÿ

---

## ğŸ—‚ï¸ æ•°æ®æµå‘

### æ·»åŠ ä¹¦ç±æµç¨‹

```
User Action (AddBook.vue)
    â†“
Button Click
    â†“
Call bookStore.createBook(data)
    â†“
bookStore (Pinia Store)
    â†“
Call bookAPI.create(data)
    â†“
bookAPI (src/api/book.ts)
    â†“
window.electronAPI.book.create(data)
    â†“
IPC (electron/preload.ts)
    â†“
bookHandler (electron/ipc/bookHandler.ts)
    â†“
database.createBook(data) (electron/services/database.ts)
    â†“
SQLite (userData/ibook.db)
    â†“
Return Book Object
    â†“
Update Pinia Store
    â†“
Re-render UI
```

### æ–‡æ¡£ä¸Šä¼ æµç¨‹ â­ é˜¶æ®µä¸ƒå·²å®Œæˆ

```
User Action (BookDetail.vue)
    â†“
Click "ä¸Šä¼ æ–‡æ¡£" Button
    â†“
Call window.api.document.selectFile()
    â†“
IPC â†’ documentHandler â†’ dialog.showOpenDialog()
    â†“
User selects file
    â†“
Call window.api.document.upload(filePath, bookId)
    â†“
IPC (electron/preload.ts)
    â†“
documentHandler (electron/ipc/documentHandler.ts)
    â†“
fileManager.saveFile(filePath, bookId)
    â”œâ”€ Copy file to userData/documents/
    â””â”€ Return: {bookId}_{uuid}.{ext}
    â†“
wordCounter.countWords(savedFilePath)
    â”œâ”€ Detect file type (.txt/.epub/.pdf/.docx)
    â”œâ”€ Extract text content
    â””â”€ Calculate word count (Chinese chars + English words)
    â†“
database.createDocument(documentInput)
    â””â”€ Insert into documents table
    â†“
Return Document Object
    â†“
Update UI (documents list + word count)
    â†“
Show confirmation dialog
    â””â”€ "æ˜¯å¦ä½¿ç”¨æ–‡æ¡£å­—æ•°ä½œä¸ºä¹¦ç±å­—æ•°ï¼Ÿ"
```

### é˜…è¯»çŠ¶æ€ç®¡ç†æµç¨‹ â­ é˜¶æ®µå…«8.3å·²å®Œæˆ

```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š

1. çŠ¶æ€ç»Ÿè®¡ç­›é€‰ï¼š
   User clicks status card in StatusStats
   â†“
   Call handleStatusClick(status)
   â†“
   bookStore.setSelectedStatus(status)
   â†“
   Update filteredBooks computed property
   â†“
   Re-render book list with filtered results

2. å¿«æ·çŠ¶æ€åˆ‡æ¢ï¼š
   User clicks status badge on BookCard
   â†“
   Show status dropdown menu
   â†“
   User selects new status
   â†“
   Call updateReadingStatus(status)
   â†“
   bookStore.updateBook(bookId, { readingStatus: status })
   â†“
   IPC â†’ bookHandler â†’ database.updateBook()
   â†“
   Update local book state
   â†“
   Update status display + Show success message
```

---

## ğŸ“¦ æ‰“åŒ…åçš„ç›®å½•ç»“æ„

```
release/
â”œâ”€â”€ win-unpacked/                    # Windows æœªæ‰“åŒ…ç‰ˆæœ¬ï¼ˆç»¿è‰²ç‰ˆï¼‰
â”‚   â”œâ”€â”€ iBook.exe
â”‚   â”œâ”€â”€ resources/
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ iBook Setup 1.0.0.exe           # Windows å®‰è£…åŒ…
```

**ç”¨æˆ·æ•°æ®ç›®å½•** (Windows):
```
C:/Users/{username}/AppData/Roaming/iBook/
â”œâ”€â”€ ibook.db                        # SQLite æ•°æ®åº“
â”œâ”€â”€ documents/                      # ä¸Šä¼ çš„æ–‡æ¡£
â”‚   â”œâ”€â”€ 1_uuid.txt
â”‚   â”œâ”€â”€ 2_uuid.epub
â”‚   â””â”€â”€ ...
â”œâ”€â”€ covers/                         # ä¸‹è½½çš„å°é¢
â”‚   â”œâ”€â”€ 1.jpg
â”‚   â”œâ”€â”€ 2.jpg
â”‚   â””â”€â”€ ...
â””â”€â”€ backups/                        # å¤‡ä»½æ–‡ä»¶
    â”œâ”€â”€ backup_20240101.json
    â”œâ”€â”€ backup_20240108.json
    â””â”€â”€ ...
```

---

## ğŸ¯ å…³é”®æŠ€æœ¯ç‚¹

### ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹é€šä¿¡

**ä¸ºä»€ä¹ˆåˆ†ç¦»ï¼Ÿ**
- **å®‰å…¨æ€§**: æ¸²æŸ“è¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—® Node.js API
- **æ€§èƒ½**: ä¸»è¿›ç¨‹å¤„ç†è€—æ—¶æ“ä½œï¼Œä¸é˜»å¡ UI
- **æ¶æ„æ¸…æ™°**: èŒè´£åˆ†ç¦»

**å¦‚ä½•é€šä¿¡ï¼Ÿ**
- é€šè¿‡ IPC (Inter-Process Communication)
- `ipcMain` (ä¸»è¿›ç¨‹) å’Œ `ipcRenderer` (æ¸²æŸ“è¿›ç¨‹)
- `contextBridge` æš´éœ²å®‰å…¨çš„ API

### æ•°æ®æŒä¹…åŒ–

**ä¸ºä»€ä¹ˆç”¨ SQLiteï¼Ÿ**
- è½»é‡çº§ï¼Œæ— éœ€å®‰è£…
- æ”¯æŒ SQL æŸ¥è¯¢
- å•æ–‡ä»¶ï¼Œæ˜“äºå¤‡ä»½
- æ€§èƒ½ä¼˜ç§€

**æ•°æ®å®‰å…¨ï¼š**
- å®šæœŸè‡ªåŠ¨å¤‡ä»½
- æ”¯æŒæ‰‹åŠ¨å¯¼å‡º
- WAL æ¨¡å¼é˜²æ­¢æŸå

### çŠ¶æ€ç®¡ç†

**ä¸ºä»€ä¹ˆç”¨ Piniaï¼Ÿ**
- Vue 3 å®˜æ–¹æ¨è
- TypeScript æ”¯æŒå¥½
- API ç®€æ´
- æ¨¡å—åŒ–

---

## ğŸš€ å¼€å‘å»ºè®®

### 1. æŒ‰æ¨¡å—å¼€å‘

ä¸è¦è¯•å›¾ä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰åŠŸèƒ½ï¼ŒæŒ‰æ¨¡å—é€æ­¥å¼€å‘ï¼š
1. æ•°æ®åº“ â†’ ä¸»è¿›ç¨‹ â†’ IPC â†’ å‰ç«¯ API â†’ UI
2. å…ˆå®ç°åŸºç¡€åŠŸèƒ½ï¼Œå†æ·»åŠ é«˜çº§åŠŸèƒ½

### 2. å…³æ³¨ç‚¹åˆ†ç¦»

- **ä¸»è¿›ç¨‹**: æ•°æ®ã€æ–‡ä»¶ã€ç½‘ç»œï¼ˆé‡é€»è¾‘ï¼‰
- **æ¸²æŸ“è¿›ç¨‹**: å±•ç¤ºã€äº¤äº’ï¼ˆé‡è§†å›¾ï¼‰
- **API å±‚**: ä½œä¸ºä¸»è¿›ç¨‹å’Œ UI çš„æ¡¥æ¢

### 3. ç±»å‹å®‰å…¨

å……åˆ†åˆ©ç”¨ TypeScriptï¼š
- å®šä¹‰æ¸…æ™°çš„æ¥å£
- é¿å…ä½¿ç”¨ `any`
- ä½¿ç”¨æ³›å‹

### 4. é”™è¯¯å¤„ç†

æ¯ä¸€å±‚éƒ½è¦å¤„ç†é”™è¯¯ï¼š
- ä¸»è¿›ç¨‹ï¼šæ•è·å¼‚å¸¸ï¼Œè®°å½•æ—¥å¿—
- IPCï¼šè¿”å›é”™è¯¯ä¿¡æ¯
- API å±‚ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
- UIï¼šå‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸ“š å‚è€ƒèµ„æº

- **Electron å®˜æ–¹æ–‡æ¡£**: https://www.electronjs.org/docs
- **Vue 3 æ–‡æ¡£**: https://vuejs.org/
- **Pinia æ–‡æ¡£**: https://pinia.vuejs.org/
- **Element Plus æ–‡æ¡£**: https://element-plus.org/
- **Better SQLite3**: https://github.com/WiseLibs/better-sqlite3

---

å¸Œæœ›è¿™ä»½ç»“æ„è¯´æ˜èƒ½å¸®åŠ©ä½ å¿«é€Ÿç†è§£é¡¹ç›®ï¼ğŸ‰

